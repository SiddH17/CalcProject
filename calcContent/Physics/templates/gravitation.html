{% extends "physics.html" %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gravitation{% endblock title %}</title>
</head>
<body>
    {% block content %}
        <!-- Newton's law of Gravitation -->
        <div id="newtonGravitation" class="container-fluid content">
            <h2><u><b>Newton's Law of Gravitation</b></u></h2>
            <h4>Select a value to be calculated:</h4>
            <br>
            
            <select name="gravitationDropdown" id="gravitationDropdown" class="form-select">
                <option value="select">--Select--</option>
                <option value="force" id="newtonForce">Force (F)</option>
                <option value="first-mass" id="mass1">Mass of first object (m1)</option>
                <option value="second-mass" id="mass2">Mass of second object (m2)</option>
                <option value="distance" id="objectDistance">Distance (r)</option>
            </select>
            <br>

            <div id="gravitationDiv" style="display: none;">
                <h4>Calculate <span id="newton_gravitation_result_label"></span>:</h4>

                <label for="gravitationForce" id="forceLabel">Force (F):
                    <input type="number" name="gravitationForce">
                </label>
                <label for="firstMass" id="mass1Label">First Object Mass (m1):
                    <input type="number" name="firstMass">
                </label>
                <label for="secondMass" id="mass2Label">Second Object Mass (m2):
                    <input type="number" name="secondMass">
                </label>
                <label for="objDistance" id="distanceLabel">Distance (r):
                    <input type="number" name="objDistance">
                </label>
                <br><br>

                <button type="submit" id="gravitationSubmit" class="btn btn-primary">Calculate Result</button>
                <p id="gravitationAns"></p>
            </div>
        </div>

        <script>
            function clearInputFields() {
                $('input').val('');
                $('p').text('');
            }

            $(document).ready(function()    {
                $('#gravitationDropdown').change(function()  {
                    clearInputFields();
                    var gravitationValue = $('#gravitationDropdown').val();
                    $('#forceLabel').show();
                    $('#mass1Label').show();
                    $('#mass2Label').show();
                    $('#distanceLabel').show();

                    if(gravitationValue == 'select')    {
                        $('#gravitationDiv').hide();
                    }
                    else    {
                        $('#gravitationDiv').show();

                        if(gravitationValue == 'force') {
                            $('#forceLabel').hide();
                        }
                        else if(gravitationValue == 'first-mass')   {
                            $('#mass1Label').hide();
                        }
                        else if (gravitationValue == 'second-mass') {
                            $('#mass2Label').hide();
                        }
                        else if(gravitationValue == 'distance') {
                            $('#distanceLabel').hide();
                        }
                    }
                });

                $('#gravitationSubmit').click(function()    {
                    var inputs = $('#gravitationDiv').find('input');
                    var data = {};

                    inputs.each(function()  {
                        var name = $(this).attr('name');
                        var value = parseFloat($(this).val());
                        data[name] = value;
                    });
                    data.selected_value = $('#gravitationDropdown').val();

                    $.ajax({
                        'type': 'GET',
                        'url': '{% url "newton-gravitation" %}',
                        'data': data,
                        'success': function(response)   {
                            $('#gravitationAns').text(response.result);
                        }
                    });
                });
            });
        </script>
    {% endblock content %}
</body>
</html>